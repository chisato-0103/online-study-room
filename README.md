# オンライン自習室

リアルタイムで学習状況を可視化し、みんなで一緒に頑張れるオンライン自習室アプリケーションです。

## 🚀 セットアップ

### 必要環境
- Node.js 18以上
- npm または yarn

### インストール
```bash
# リポジトリをクローン
git clone https://github.com/chisato-0103/online-study-room.git
cd online-study-room

# 依存関係をインストール
npm run install:all

# 環境変数を設定
cp backend/.env.example backend/.env
```

### 開発環境での起動
```bash
# バックエンドとフロントエンドを同時起動
npm run dev

# 個別に起動する場合
npm run dev:backend  # バックエンド (http://localhost:3001)
npm run dev:frontend # フロントエンド (http://localhost:5173)
```

### Vercelへのデプロイ
```bash
# Vercel CLIをインストール
npm i -g vercel

# デプロイ
vercel

# 環境変数を設定
vercel env add DATABASE_URL
vercel env add JWT_SECRET
```

## 📱 使い方

1. **学習セッション開始**: ニックネーム、学習場所、退室予定時刻を入力
2. **自習室マップ**: 各場所の混雑状況とユーザー一覧をリアルタイム表示
3. **ポモドーロタイマー**: 25分作業 + 5分休憩のサイクルでタイマー実行
4. **ご意見フォーム**: 場所追加・不具合報告・機能要望を送信

## 目次
- [オンライン自習室](#オンライン自習室)
  - [🚀 セットアップ](#-セットアップ)
  - [📱 使い方](#-使い方)
  - [目次](#目次)
  - [1. 目的](#1-目的)
  - [2. コア機能一覧](#2-コア機能一覧)
  - [3. 機能仕様](#3-機能仕様)
    - [3‑1. ユーザー情報登録](#31-ユーザー情報登録)
    - [3‑2. 時計＆ポモドーロタイマー](#32-時計ポモドーロタイマー)
    - [3‑3. 仮想自習室マップ](#33-仮想自習室マップ)
    - [3‑4. 自動退室処理](#34-自動退室処理)
    - [3‑5. ご意見フォーム](#35-ご意見フォーム)
  - [4. 技術スタック](#4-技術スタック)
  - [5. 将来的な拡張アイデア](#5-将来的な拡張アイデア)
    - [まとめ](#まとめ)
---

## 1. 目的
- **学習の可視化**：学内で「今どれだけ人が頑張っているか」をリアルタイム表示し、孤独感を軽減
- **行動のトリガー**：混雑度や仲間の存在を確認し、やる気を引き出す
- **データ蓄積**：混雑傾向を蓄積し、静かな環境を探す指標に活用

---

## 2. コア機能一覧

| # | 機能 | 概要 |
|---|------|------|
| 1 | ユーザー情報登録 | ニックネーム／退室予定時刻などを入力 |
| 2 | 時計＆タイマー | 現在時刻と 25‑5 ポモドーロを常時表示 |
| 3 | 仮想自習室マップ | 図書館・1号館1F/2F などにアバターを配置 |
| 4 | 自動退室 | 退室予定10分前にアラート→無反応なら自動退室 |
| 5 | ご意見フォーム | 場所追加・要望を受付 |

---

## 3. 機能仕様

### 3‑1. ユーザー情報登録
- **必須**：ニックネーム・退室予定時刻
- **任意**：科目・学習場所（プルダウン＋フリーワード）・滞在時間公開
- **編集**：プロフィール画面から随時変更可能
- **プライバシー配慮**
  - 本名入力の禁止を明記した警告文を表示
  - 学習場所の入力は任意。未入力の場合は「その他自習室」に表示
  - 位置情報は端末のGPSを使用せず、ユーザーが選択した学内エリアのみを表示

---

### 3‑2. 時計＆ポモドーロタイマー
- 画面右上に **現在日時 (YYYY/MM/DD HH:MM)** を表示
- ポモドーロ（25分作業＋5分休憩）を自動ループ
- 残り時間プログレスバーと、休憩中は色反転で視認性を確保
- ブラウザ通知／バイブレーションでセッション終了を通知

---

### 3‑3. 仮想自習室マップ
- **初期対応エリア**：図書館・1号館1F・1号館2F
- マップ上にユーザーアイコン＋滞在時間をリアルタイム配置
- 勉強場所未設定のユーザーは「その他自習室」に統合表示
- 人数バッジで混雑度を可視化
- 場所追加は管理画面またはご意見フォーム経由で随時反映

---

### 3‑4. 自動退室処理
1. 退室予定時刻 **10分前** にポップアップで延長確認
2. 予定時刻までに「延長」または「退室」を選択しなければ自動退室
3. 退室時に “お疲れさま” 通知＆その日の学習時間をログ保存

---

### 3‑5. ご意見フォーム
- **カテゴリ**：場所追加／不具合報告／機能要望／その他
- Googleフォーム or アプリ内フォーム
- 投稿は1日1回まで。送信後にサンクスページを表示

---

## 4. 技術スタック

### フロントエンド
- **React 18** + **TypeScript**: モダンなUI開発
- **Vite**: 高速なビルドツール
- **Zustand**: 軽量な状態管理
- **Socket.io Client**: リアルタイム通信
- **Axios**: API通信

### バックエンド
- **Node.js** + **Express**: RESTful API
- **TypeScript**: 型安全な開発
- **Socket.io**: WebSocketベースのリアルタイム通信
- **Zod**: バリデーション
- **Rate Limiting**: API制限

### デプロイ・インフラ
- **Vercel**: フロントエンド・バックエンド・API統合ホスティング
- **PostgreSQL**: データベース（将来的に導入予定）

### セキュリティ
- **Helmet**: セキュリティヘッダー
- **CORS**: クロスオリジン制御
- **入力検証**: XSS・インジェクション対策

## 5. 将来的な拡張アイデア
- **ゲーミフィケーション**：連続学習日数バッジ、学習時間ランキング
- **統計ダッシュボード**：曜日・時間帯別の混雑グラフ
- **SNS連携**：X / LINE で学習完了を共有
- **ダークモード**：夜間利用者向けテーマ
- **API公開**：他学習アプリとのデータ連携
- **BGM追加**：起動中バックグラウンドでBGMを再生

---

### まとめ
まずは **3‑1〜3‑4** を実装し、実地テストでフィードバックを収集。
要望フォームで得た改善点を反映しながら、将来的な拡張機能を順次追加していくロードマップを想定。
