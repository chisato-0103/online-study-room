#!/bin/bash

# オンライン自習室アプリのサーバー起動スクリプト
# このファイルを実行すると、バックエンドとフロントエンドの両方のサーバーが起動します

echo "🚀 オンライン自習室アプリを起動中..."
echo ""

# プロジェクトのルートディレクトリに移動
cd "$(dirname "$0")"

# 1. バックエンドサーバーを起動（バックグラウンド実行）
echo "📡 バックエンドサーバーを起動中... (ポート3001)"
cd backend
npm run dev &
BACKEND_PID=$!
cd ..

# 少し待機（バックエンドが起動するまで）
sleep 3

# 2. フロントエンドサーバーを起動
echo "🌐 フロントエンドサーバーを起動中... (ポート3000)"
cd frontend
npm run dev

# Ctrl+Cが押された時の処理
trap 'echo ""; echo "🛑 サーバーを停止中..."; kill $BACKEND_PID; exit' INT

# スクリプトが終了するまで待機
wait